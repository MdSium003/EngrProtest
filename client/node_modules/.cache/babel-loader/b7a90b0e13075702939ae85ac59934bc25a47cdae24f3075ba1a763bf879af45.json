{"ast":null,"code":"var _jsxFileName = \"E:\\\\EngrProtest\\\\EngrProtest\\\\client\\\\src\\\\components\\\\FacebookPosts.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FacebookPosts = ({\n  token\n}) => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [pending, setPending] = useState([]);\n  const [link, setLink] = useState('');\n  const isAdmin = Boolean(token);\n  const fetchApproved = async () => {\n    try {\n      const res = await fetch('/api/posts');\n      const data = await res.json();\n      setPosts(data);\n    } catch (error) {\n      console.error(\"Failed to fetch approved posts:\", error);\n    }\n  };\n  const fetchPending = async () => {\n    if (!isAdmin) return;\n    try {\n      const res = await fetch('/api/posts/pending', {\n        headers: {\n          'x-auth-token': token\n        }\n      });\n      const data = await res.json();\n      setPending(data);\n    } catch (error) {\n      console.error(\"Failed to fetch pending posts:\", error);\n    }\n  };\n  useEffect(() => {\n    fetchApproved();\n    if (token) {\n      fetchPending();\n    }\n  }, [token]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!link) return;\n    await fetch('/api/posts', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        facebook_link: link\n      })\n    });\n    setLink('');\n    alert('Submission received, awaiting approval.');\n  };\n  const handleApprove = async id => {\n    await fetch(`/api/posts/approve/${id}`, {\n      method: 'PUT',\n      headers: {\n        'x-auth-token': token\n      }\n    });\n    await fetchApproved();\n    await fetchPending();\n  };\n\n  // Helper function to create the iframe for a post\n  const renderPost = post => {\n    const encodedLink = encodeURIComponent(post.facebook_link);\n    const iframeSrc = `https://www.facebook.com/plugins/post.php?href=${encodedLink}&show_text=true&width=500`;\n    return /*#__PURE__*/_jsxDEV(\"iframe\", {\n      src: iframeSrc,\n      width: \"500\",\n      height: \"660\",\n      style: {\n        border: 'none',\n        overflow: 'hidden'\n      },\n      scrolling: \"no\",\n      frameBorder: \"0\",\n      allowFullScreen: \"true\",\n      allow: \"autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share\",\n      title: `Facebook Post: ${post.id}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Facebook Posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"form-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"url\",\n          value: link,\n          onChange: e => setLink(e.target.value),\n          placeholder: \"Enter Facebook post link to submit for approval\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Approved Posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"posts-grid\",\n        children: posts.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: renderPost(p)\n        }, p.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), isAdmin && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Pending Approval\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), pending.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"posts-grid\",\n          children: pending.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: [renderPost(p), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"admin-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleApprove(p.id),\n                className: \"btn\",\n                children: \"Approve\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 21\n            }, this)]\n          }, p.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No pending posts.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(FacebookPosts, \"OokwDnRqoAClXRYG4dyq6N5eF3I=\");\n_c = FacebookPosts;\nexport default FacebookPosts;\nvar _c;\n$RefreshReg$(_c, \"FacebookPosts\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","FacebookPosts","token","_s","posts","setPosts","pending","setPending","link","setLink","isAdmin","Boolean","fetchApproved","res","fetch","data","json","error","console","fetchPending","headers","handleSubmit","e","preventDefault","method","body","JSON","stringify","facebook_link","alert","handleApprove","id","renderPost","post","encodedLink","encodeURIComponent","iframeSrc","src","width","height","style","border","overflow","scrolling","frameBorder","allowFullScreen","allow","title","fileName","_jsxFileName","lineNumber","columnNumber","children","className","onSubmit","type","value","onChange","target","placeholder","required","map","p","length","onClick","_c","$RefreshReg$"],"sources":["E:/EngrProtest/EngrProtest/client/src/components/FacebookPosts.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nconst FacebookPosts = ({ token }) => {\n  const [posts, setPosts] = useState([]);\n  const [pending, setPending] = useState([]);\n  const [link, setLink] = useState('');\n  const isAdmin = Boolean(token);\n\n  const fetchApproved = async () => {\n    try {\n      const res = await fetch('/api/posts');\n      const data = await res.json();\n      setPosts(data);\n    } catch (error) {\n      console.error(\"Failed to fetch approved posts:\", error);\n    }\n  };\n\n  const fetchPending = async () => {\n    if (!isAdmin) return;\n    try {\n      const res = await fetch('/api/posts/pending', {\n        headers: { 'x-auth-token': token }\n      });\n      const data = await res.json();\n      setPending(data);\n    } catch (error) {\n      console.error(\"Failed to fetch pending posts:\", error);\n    }\n  };\n\n  useEffect(() => {\n    fetchApproved();\n    if (token) {\n      fetchPending();\n    }\n  }, [token]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!link) return;\n    await fetch('/api/posts', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ facebook_link: link })\n    });\n    setLink('');\n    alert('Submission received, awaiting approval.');\n  };\n\n  const handleApprove = async (id) => {\n    await fetch(`/api/posts/approve/${id}`, {\n      method: 'PUT',\n      headers: { 'x-auth-token': token }\n    });\n    await fetchApproved();\n    await fetchPending();\n  };\n\n  // Helper function to create the iframe for a post\n  const renderPost = (post) => {\n    const encodedLink = encodeURIComponent(post.facebook_link);\n    const iframeSrc = `https://www.facebook.com/plugins/post.php?href=${encodedLink}&show_text=true&width=500`;\n\n    return (\n      <iframe\n        src={iframeSrc}\n        width=\"500\"\n        height=\"660\"\n        style={{ border: 'none', overflow: 'hidden' }}\n        scrolling=\"no\"\n        frameBorder=\"0\"\n        allowFullScreen=\"true\"\n        allow=\"autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share\"\n        title={`Facebook Post: ${post.id}`}\n      ></iframe>\n    );\n  };\n\n  return (\n    <>\n      <div className=\"container\">\n        <h2>Facebook Posts</h2>\n        <form onSubmit={handleSubmit} className=\"form-container\">\n          <input\n            type=\"url\"\n            value={link}\n            onChange={(e) => setLink(e.target.value)}\n            placeholder=\"Enter Facebook post link to submit for approval\"\n            required\n          />\n          <button type=\"submit\" className=\"btn\">Submit</button>\n        </form>\n\n        <h3>Approved Posts</h3>\n        <div className=\"posts-grid\">\n          {posts.map((p) => (\n            <div className=\"card\" key={p.id}>\n              {renderPost(p)}\n            </div>\n          ))}\n        </div>\n\n        {isAdmin && (\n          <>\n            <h3>Pending Approval</h3>\n            {pending.length > 0 ? (\n              <div className=\"posts-grid\">\n                {pending.map((p) => (\n                  <div className=\"card\" key={p.id}>\n                    {renderPost(p)}\n                    <div className=\"admin-actions\">\n                      <button onClick={() => handleApprove(p.id)} className=\"btn\">Approve</button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : <p>No pending posts.</p>}\n          </>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default FacebookPosts;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}